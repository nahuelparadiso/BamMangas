<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Detalles del Manga</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>

  <!-- 🌓 Botón de cambio de tema -->
  <button id="toggle-theme" class="btn-primary">🌓 Cambiar tema</button>

  <!-- 🧡 Encabezado con navegación -->
  <header class="bam-header">
    <div class="header-left">
      <div class="logo">
        <a href="../index.html" class="logo-link">BamMangas</a>
      </div>
    </div>

    <!-- 🔗 Botones de navegación (Mi Perfil / Inicio) -->
    <div class="perfil-topbar">
      <a href="perfil.html" class="btn-perfil">
        <img src="../assets/img/avatar1.jpg" alt="Avatar" class="perfil-avatar" />
        Mi Perfil
      </a>
      <a href="../index.html" class="btn-inicio">Inicio</a>
    </div>
  </header>

  <!-- 📚 Contenido del manga -->
  <main id="manga-details" style="padding: 2rem;">
    <!-- Información principal del manga -->
    <div class="manga-info-container">
      <img id="manga-imagen" alt="Portada del manga" />
      <h2 id="manga-titulo"></h2>
      <p id="manga-genero"></p> <!-- 🔧 Ya sin estrellitas -->
      <p id="manga-descripcion"></p>
    </div>

    <!-- Historia narrativa -->
    <section class="manga-sinopsis">
      <h3>📝 Historia resumida</h3>
      <p id="historia-texto"></p>
    </section>

    <!-- Capítulo de lectura -->
    <section class="manga-capitulo">
      <h3>📖 Capítulo de lectura</h3>
      <label for="selector-capitulo">📑 Elegí un capítulo:</label>
      <select id="selector-capitulo"></select>
      <div id="capitulo-contenido">
        <p>Cargando contenido del capítulo...</p>
      </div>
    </section>
  </main>

  <script src="../manga.js"></script>
  <script>
    // 🌓 Activar modo claro/oscuro
    const toggleBtn = document.getElementById("toggle-theme");
    const body = document.body;

    if (localStorage.getItem("tema") === "oscuro") {
      body.classList.add("dark-mode");
    }

    toggleBtn?.addEventListener("click", () => {
      body.classList.toggle("dark-mode");
      const nuevoTema = body.classList.contains("dark-mode") ? "oscuro" : "claro";
      localStorage.setItem("tema", nuevoTema);
    });

    // 🔁 Sincronizar avatar del botón "Mi Perfil"
    const usuarioActivo = JSON.parse(localStorage.getItem("bamActivo"));
    const avatarTopbar = document.querySelector(".perfil-avatar");

    if (usuarioActivo && avatarTopbar) {
      avatarTopbar.src = usuarioActivo.avatar || "../assets/img/avatar1.jpg";
    }
  </script>
</body>
</html>
